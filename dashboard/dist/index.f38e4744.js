var e,t,n,i,r,o,a={},l=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function c(e,t){for(var n in t)e[n]=t[n];return e}function u(e){var t=e.parentNode;t&&t.removeChild(e)}function _(t,n,i){var r,o,a,l={};for(a in n)"key"==a?r=n[a]:"ref"==a?o=n[a]:l[a]=n[a];if(arguments.length>2&&(l.children=arguments.length>3?e.call(arguments,2):i),"function"==typeof t&&null!=t.defaultProps)for(a in t.defaultProps)void 0===l[a]&&(l[a]=t.defaultProps[a]);return d(t,l,r,o,null)}function d(e,i,r,o,a){var l={type:e,props:i,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==a?++n:a};return null==a&&null!=t.vnode&&t.vnode(l),l}function h(e){return e.children}function f(e,t){this.props=e,this.context=t}function p(e,t){if(null==t)return e.__?p(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?p(e):null}function m(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return m(e)}}function v(e){(!e.__d&&(e.__d=!0)&&i.push(e)&&!g.__r++||r!==t.debounceRendering)&&((r=t.debounceRendering)||setTimeout)(g)}function g(){for(var e;g.__r=i.length;)e=i.sort((function(e,t){return e.__v.__b-t.__v.__b})),i=[],e.some((function(e){var t,n,i,r,o,a;e.__d&&(o=(r=(t=e).__v).__e,(a=t.__P)&&(n=[],(i=c({},r)).__v=r.__v+1,j(a,r,i,t.__n,void 0!==a.ownerSVGElement,null!=r.__h?[o]:null,n,null==o?p(r):o,r.__h),O(n,r),r.__e!=o&&m(r)))}))}function y(e,t,n,i,r,o,s,c,u,_){var f,m,v,g,y,k,C,N=i&&i.__k||l,T=N.length;for(n.__k=[],f=0;f<t.length;f++)if(null!=(g=n.__k[f]=null==(g=t[f])||"boolean"==typeof g?null:"string"==typeof g||"number"==typeof g||"bigint"==typeof g?d(null,g,null,null,g):Array.isArray(g)?d(h,{children:g},null,null,null):g.__b>0?d(g.type,g.props,g.key,g.ref?g.ref:null,g.__v):g)){if(g.__=n,g.__b=n.__b+1,null===(v=N[f])||v&&g.key==v.key&&g.type===v.type)N[f]=void 0;else for(m=0;m<T;m++){if((v=N[m])&&g.key==v.key&&g.type===v.type){N[m]=void 0;break}v=null}j(e,g,v=v||a,r,o,s,c,u,_),y=g.__e,(m=g.ref)&&v.ref!=m&&(C||(C=[]),v.ref&&C.push(v.ref,null,g),C.push(m,g.__c||y,g)),null!=y?(null==k&&(k=y),"function"==typeof g.type&&g.__k===v.__k?g.__d=u=b(g,u,e):u=w(e,g,v,N,y,u),"function"==typeof n.type&&(n.__d=u)):u&&v.__e==u&&u.parentNode!=e&&(u=p(v))}for(n.__e=k,f=T;f--;)null!=N[f]&&x(N[f],N[f]);if(C)for(f=0;f<C.length;f++)$(C[f],C[++f],C[++f])}function b(e,t,n){for(var i,r=e.__k,o=0;r&&o<r.length;o++)(i=r[o])&&(i.__=e,t="function"==typeof i.type?b(i,t,n):w(n,i,i,r,i.__e,t));return t}function k(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){k(e,t)})):t.push(e)),t}function w(e,t,n,i,r,o){var a,l,s;if(void 0!==t.__d)a=t.__d,t.__d=void 0;else if(null==n||r!=o||null==r.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(r),a=null;else{for(l=o,s=0;(l=l.nextSibling)&&s<i.length;s+=1)if(l==r)break e;e.insertBefore(r,o),a=o}return void 0!==a?a:r.nextSibling}function C(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||s.test(t)?n:n+"px"}function N(e,t,n,i,r){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||C(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||C(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?i||e.addEventListener(t,o?S:T,o):e.removeEventListener(t,o?S:T,o);else if("dangerouslySetInnerHTML"!==t){if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,n))}}function T(e){this.l[e.type+!1](t.event?t.event(e):e)}function S(e){this.l[e.type+!0](t.event?t.event(e):e)}function j(n,i,r,o,l,s,_,d,m){var v,g,b,k,w,C,T,S,j,O,$,x,U,A,R,F=i.type;if(void 0!==i.constructor)return null;null!=r.__h&&(m=r.__h,d=i.__e=r.__e,i.__h=null,s=[d]),(v=t.__b)&&v(i);try{e:if("function"==typeof F){if(S=i.props,j=(v=F.contextType)&&o[v.__c],O=v?j?j.props.value:v.__:o,r.__c?T=(g=i.__c=r.__c).__=g.__E:("prototype"in F&&F.prototype.render?i.__c=g=new F(S,O):(i.__c=g=new f(S,O),g.constructor=F,g.render=D),j&&j.sub(g),g.props=S,g.state||(g.state={}),g.context=O,g.__n=o,b=g.__d=!0,g.__h=[],g._sb=[]),null==g.__s&&(g.__s=g.state),null!=F.getDerivedStateFromProps&&(g.__s==g.state&&(g.__s=c({},g.__s)),c(g.__s,F.getDerivedStateFromProps(S,g.__s))),k=g.props,w=g.state,b)null==F.getDerivedStateFromProps&&null!=g.componentWillMount&&g.componentWillMount(),null!=g.componentDidMount&&g.__h.push(g.componentDidMount);else{if(null==F.getDerivedStateFromProps&&S!==k&&null!=g.componentWillReceiveProps&&g.componentWillReceiveProps(S,O),!g.__e&&null!=g.shouldComponentUpdate&&!1===g.shouldComponentUpdate(S,g.__s,O)||i.__v===r.__v){for(g.props=S,g.state=g.__s,i.__v!==r.__v&&(g.__d=!1),g.__v=i,i.__e=r.__e,i.__k=r.__k,i.__k.forEach((function(e){e&&(e.__=i)})),$=0;$<g._sb.length;$++)g.__h.push(g._sb[$]);g._sb=[],g.__h.length&&_.push(g);break e}null!=g.componentWillUpdate&&g.componentWillUpdate(S,g.__s,O),null!=g.componentDidUpdate&&g.__h.push((function(){g.componentDidUpdate(k,w,C)}))}if(g.context=O,g.props=S,g.__v=i,g.__P=n,x=t.__r,U=0,"prototype"in F&&F.prototype.render){for(g.state=g.__s,g.__d=!1,x&&x(i),v=g.render(g.props,g.state,g.context),A=0;A<g._sb.length;A++)g.__h.push(g._sb[A]);g._sb=[]}else do{g.__d=!1,x&&x(i),v=g.render(g.props,g.state,g.context),g.state=g.__s}while(g.__d&&++U<25);g.state=g.__s,null!=g.getChildContext&&(o=c(c({},o),g.getChildContext())),b||null==g.getSnapshotBeforeUpdate||(C=g.getSnapshotBeforeUpdate(k,w)),R=null!=v&&v.type===h&&null==v.key?v.props.children:v,y(n,Array.isArray(R)?R:[R],i,r,o,l,s,_,d,m),g.base=i.__e,i.__h=null,g.__h.length&&_.push(g),T&&(g.__E=g.__=null),g.__e=!1}else null==s&&i.__v===r.__v?(i.__k=r.__k,i.__e=r.__e):i.__e=function(t,n,i,r,o,l,s,c){var _,d,h,f=i.props,m=n.props,v=n.type,g=0;if("svg"===v&&(o=!0),null!=l)for(;g<l.length;g++)if((_=l[g])&&"setAttribute"in _==!!v&&(v?_.localName===v:3===_.nodeType)){t=_,l[g]=null;break}if(null==t){if(null===v)return document.createTextNode(m);t=o?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,m.is&&m),l=null,c=!1}if(null===v)f===m||c&&t.data===m||(t.data=m);else{if(l=l&&e.call(t.childNodes),d=(f=i.props||a).dangerouslySetInnerHTML,h=m.dangerouslySetInnerHTML,!c){if(null!=l)for(f={},g=0;g<t.attributes.length;g++)f[t.attributes[g].name]=t.attributes[g].value;(h||d)&&(h&&(d&&h.__html==d.__html||h.__html===t.innerHTML)||(t.innerHTML=h&&h.__html||""))}if(function(e,t,n,i,r){var o;for(o in n)"children"===o||"key"===o||o in t||N(e,o,null,n[o],i);for(o in t)r&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||N(e,o,t[o],n[o],i)}(t,m,f,o,c),h)n.__k=[];else if(g=n.props.children,y(t,Array.isArray(g)?g:[g],n,i,r,o&&"foreignObject"!==v,l,s,l?l[0]:i.__k&&p(i,0),c),null!=l)for(g=l.length;g--;)null!=l[g]&&u(l[g]);c||("value"in m&&void 0!==(g=m.value)&&(g!==t.value||"progress"===v&&!g||"option"===v&&g!==f.value)&&N(t,"value",g,f.value,!1),"checked"in m&&void 0!==(g=m.checked)&&g!==t.checked&&N(t,"checked",g,f.checked,!1))}return t}(r.__e,i,r,o,l,s,_,m);(v=t.diffed)&&v(i)}catch(n){i.__v=null,(m||null!=s)&&(i.__e=d,i.__h=!!m,s[s.indexOf(d)]=null),t.__e(n,i,r)}}function O(e,n){t.__c&&t.__c(n,e),e.some((function(n){try{e=n.__h,n.__h=[],e.some((function(e){e.call(n)}))}catch(e){t.__e(e,n.__v)}}))}function $(e,n,i){try{"function"==typeof e?e(n):e.current=n}catch(e){t.__e(e,i)}}function x(e,n,i){var r,o;if(t.unmount&&t.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||$(r,null,n)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){t.__e(e,n)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&x(r[o],n,i||"function"!=typeof e.type);i||null==e.__e||u(e.__e),e.__=e.__e=e.__d=void 0}function D(e,t,n){return this.constructor(e,n)}function U(n,i,r){var o,l,s;t.__&&t.__(n,i),l=(o="function"==typeof r)?null:r&&r.__k||i.__k,s=[],j(i,n=(!o&&r||i).__k=_(h,null,[n]),l||a,a,void 0!==i.ownerSVGElement,!o&&r?[r]:l?null:i.firstChild?e.call(i.childNodes):null,s,!o&&r?r:l?l.__e:i.firstChild,o),O(s,n)}function A(t,n,i){var r,o,a,l=c({},t.props);for(a in n)"key"==a?r=n[a]:"ref"==a?o=n[a]:l[a]=n[a];return arguments.length>2&&(l.children=arguments.length>3?e.call(arguments,2):i),d(t.type,l,r||t.key,o||t.ref,null)}e=l.slice,t={__e:function(e,t,n,i){for(var r,o,a;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&null!=o.getDerivedStateFromError&&(r.setState(o.getDerivedStateFromError(e)),a=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,i||{}),a=r.__d),a)return r.__E=r}catch(t){e=t}throw e}},n=0,f.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=c({},this.state),"function"==typeof e&&(e=e(c({},n),this.props)),e&&c(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),v(this))},f.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),v(this))},f.prototype.render=h,i=[],g.__r=0,o=0;var R=function(e,t,n,i){var r;t[0]=0;for(var o=1;o<t.length;o++){var a=t[o++],l=t[o]?(t[0]|=a?1:2,n[t[o++]]):t[++o];3===a?i[0]=l:4===a?i[1]=Object.assign(i[1]||{},l):5===a?(i[1]=i[1]||{})[t[++o]]=l:6===a?i[1][t[++o]]+=l+"":a?(r=e.apply(l,R(e,l,n,["",null])),i.push(r),l[0]?t[0]|=2:(t[o-2]=0,t[o]=r)):i.push(l)}return i},F=new Map;var P=0;function E(e,n,i,r,o){var a,l,s={};for(l in n)"ref"==l?a=n[l]:s[l]=n[l];var c={type:e,props:s,key:i,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--P,__source:o,__self:r};if("function"==typeof e&&(a=e.defaultProps))for(l in a)void 0===s[l]&&(s[l]=a[l]);return t.vnode&&t.vnode(c),c}var I,M,H,L=[],W=[],V=t.__b,K=t.__r,q=t.diffed,B=t.__c,z=t.unmount;function G(){for(var e;e=L.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(X),e.__H.__h.forEach(Y),e.__H.__h=[]}catch(n){e.__H.__h=[],t.__e(n,e.__v)}}t.__b=function(e){I=null,V&&V(e)},t.__r=function(e){K&&K(e),0;var t=(I=e.__c).__H;t&&(M===I?(t.__h=[],I.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.__V=W,e.__N=e.i=void 0}))):(t.__h.forEach(X),t.__h.forEach(Y),t.__h=[])),M=I},t.diffed=function(e){q&&q(e);var n=e.__c;n&&n.__H&&(n.__H.__h.length&&(1!==L.push(n)&&H===t.requestAnimationFrame||((H=t.requestAnimationFrame)||Q)(G)),n.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.__V!==W&&(e.__=e.__V),e.i=void 0,e.__V=W}))),M=I=null},t.__c=function(e,n){n.some((function(e){try{e.__h.forEach(X),e.__h=e.__h.filter((function(e){return!e.__||Y(e)}))}catch(i){n.some((function(e){e.__h&&(e.__h=[])})),n=[],t.__e(i,e.__v)}})),B&&B(e,n)},t.unmount=function(e){z&&z(e);var n,i=e.__c;i&&i.__H&&(i.__H.__.forEach((function(e){try{X(e)}catch(e){n=e}})),i.__H=void 0,n&&t.__e(n,i.__v))};var J="function"==typeof requestAnimationFrame;function Q(e){var t,n=function(){clearTimeout(i),J&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);J&&(t=requestAnimationFrame(n))}function X(e){var t=I,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),I=t}function Y(e){var t=I;e.__c=e.__(),I=t}var Z={};function ee(e,t){for(var n in t)e[n]=t[n];return e}function te(e,t,n){var i,r=/(?:\?([^#]*))?(#.*)?$/,o=e.match(r),a={};if(o&&o[1])for(var l=o[1].split("&"),s=0;s<l.length;s++){var c=l[s].split("=");a[decodeURIComponent(c[0])]=decodeURIComponent(c.slice(1).join("="))}e=re(e.replace(r,"")),t=re(t||"");for(var u=Math.max(e.length,t.length),_=0;_<u;_++)if(t[_]&&":"===t[_].charAt(0)){var d=t[_].replace(/(^:|[+*?]+$)/g,""),h=(t[_].match(/[+*?]+$/)||Z)[0]||"",f=~h.indexOf("+"),p=~h.indexOf("*"),m=e[_]||"";if(!m&&!p&&(h.indexOf("?")<0||f)){i=!1;break}if(a[d]=decodeURIComponent(m),f||p){a[d]=e.slice(_).map(decodeURIComponent).join("/");break}}else if(t[_]!==e[_]){i=!1;break}return(!0===n.default||!1!==i)&&a}function ne(e,t){return e.rank<t.rank?1:e.rank>t.rank?-1:e.index-t.index}function ie(e,t){return e.index=t,e.rank=function(e){return e.props.default?0:re(e.props.path).map(oe).join("")}(e),e.props}function re(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function oe(e){return":"==e.charAt(0)?1+"*+?".indexOf(e.charAt(e.length-1))||4:5}var ae,le,se={},ce=[],ue=[],_e=null,de={url:fe()},he=(le={__c:ae="__cC"+o++,__:de,Consumer:function(e,t){return e.children(t)},Provider:function(e){var t,n;return this.getChildContext||(t=[],(n={})[ae]=this,this.getChildContext=function(){return n},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&t.some(v)},this.sub=function(e){t.push(e);var n=e.componentWillUnmount;e.componentWillUnmount=function(){t.splice(t.indexOf(e),1),n&&n.call(e)}}),e.children}}).Provider.__=le.Consumer.contextType=le;function fe(){var e;return""+((e=_e&&_e.location?_e.location:_e&&_e.getCurrentLocation?_e.getCurrentLocation():"undefined"!=typeof location?location:se).pathname||"")+(e.search||"")}function pe(e,t){return void 0===t&&(t=!1),"string"!=typeof e&&e.url&&(t=e.replace,e=e.url),function(e){for(var t=ce.length;t--;)if(ce[t].canRoute(e))return!0;return!1}(e)&&function(e,t){void 0===t&&(t="push"),_e&&_e[t]?_e[t](e):"undefined"!=typeof history&&history[t+"State"]&&history[t+"State"](null,null,e)}(e,t?"replace":"push"),me(e)}function me(e){for(var t=!1,n=0;n<ce.length;n++)ce[n].routeTo(e)&&(t=!0);return t}function ve(e){if(e&&e.getAttribute){var t=e.getAttribute("href"),n=e.getAttribute("target");if(t&&t.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return pe(t)}}function ge(e){return e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),e.preventDefault(),!1}function ye(e){if(!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button)){var t=e.target;do{if("a"===t.localName&&t.getAttribute("href")){if(t.hasAttribute("data-native")||t.hasAttribute("native"))return;if(ve(t))return ge(e)}}while(t=t.parentNode)}}var be=!1;function ke(e){e.history&&(_e=e.history),this.state={url:e.url||fe()}}ee(ke.prototype=new f,{shouldComponentUpdate:function(e){return!0!==e.static||e.url!==this.props.url||e.onChange!==this.props.onChange},canRoute:function(e){var t=k(this.props.children);return void 0!==this.g(t,e)},routeTo:function(e){this.setState({url:e});var t=this.canRoute(e);return this.p||this.forceUpdate(),t},componentWillMount:function(){this.p=!0},componentDidMount:function(){var e=this;be||(be=!0,_e||addEventListener("popstate",(function(){me(fe())})),addEventListener("click",ye)),ce.push(this),_e&&(this.u=_e.listen((function(t){var n=t.location||t;e.routeTo(""+(n.pathname||"")+(n.search||""))}))),this.p=!1},componentWillUnmount:function(){"function"==typeof this.u&&this.u(),ce.splice(ce.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(e,t){e=e.filter(ie).sort(ne);for(var n=0;n<e.length;n++){var i=e[n],r=te(t,i.props.path,i.props);if(r)return[i,r]}},render:function(e,t){var n,i,r=e.onChange,o=t.url,a=this.c,l=this.g(k(e.children),o);if(l&&(i=A(l[0],ee(ee({url:o,matches:n=l[1]},n),{key:void 0,ref:void 0}))),o!==(a&&a.url)){ee(de,a=this.c={url:o,previous:a&&a.url,current:i,path:i?i.props.path:null,matches:n}),a.router=this,a.active=i?[i]:[];for(var s=ue.length;s--;)ue[s]({});"function"==typeof r&&r(a)}return _(he.Provider,{value:a},i)}});function we({updateTimeframe:e,updateCustomTimeframe:t,clearCustomTimeframe:n,updateResolution:i,filters:r}){return E("div",{className:"grid-lg contain",children:[!r.from&&!r.to&&E("div",{className:"w-50-lg",children:[E("h4",{children:"Timeframe"}),E("div",{children:[o("today","Today"),o("past-day","Past day"),o("past-week","Past week")]}),E("div",{children:[o("past-month","Past month"),o("past-6-months","Past 6 months"),o("past-year","Past year")]})]}),!r.from&&!r.to&&E("div",{className:"w-50-lg",children:[E("h4",{children:"Resolution"}),E("div",{children:[["past-year","past-6-months"].includes(r.timeframe)&&a("monthly","Monthly"),["past-week","past-month","past-6-months","past-year"].includes(r.timeframe)&&a("daily","Daily"),["today","past-day","past-week","past-month","past-6-months"].includes(r.timeframe)&&a("hourly","Hourly"),["today","past-day","past-week"].includes(r.timeframe)&&a("minutes","Minutes")]})]}),r.from&&E("div",{children:[r.from&&E("span",{className:"filterable static-filter",children:"From "}),r.from&&E("input",{type:"datetime-local",onChange:e=>{t(+new Date(e.target.value),+r.to)},value:new Date(+r.from).toISOString().substring(0,16)})]}),r.from&&r.to&&E("div",{children:[r.to&&E("span",{className:"filterable static-filter",children:"To "}),r.to&&E("input",{type:"datetime-local",onChange:e=>{t(+r.from,+new Date(e.target.value))},value:new Date(+r.to).toISOString().substring(0,16)})]}),(r.from||r.to)&&E("div",{className:"filterable static-filter",onClick:()=>n(),children:"Clear [x]"})]});function o(t,n){return E("a",{href:"#",onClick:n=>{n.preventDefault(),e(t)},className:`select-timeframe filterable static-filter ${r.timeframe===t&&"active"}`,name:t,id:t,children:n})}function a(e,t){return E("a",{href:"#",onClick:t=>{t.preventDefault(),i(e)},className:`select-resolution filterable static-filter ${r.resolution===e&&"active"}`,name:e,id:e,children:t})}}function Ce({theme:e,toggleTheme:t=Function.prototype}){return E("div",{className:"theme-toggle",onClick:t,children:["dark"===e?"light":"dark"," theme"]})}function Ne({searchTerm:e="",updateSearchTerm:t=Function.prototype}={}){return E("div",{className:"contain",children:E("input",{className:"search",placeholder:"Filter by page or referrer",onKeyUp:e=>{console.log("changed",e.target.value),t(e.target.value)}})})}function Te({data:e,filters:t={},updateCustomTimeframe:n}){if(!e)return null;if(!Array.isArray(e.chartData))return null;if(e.chartData.length<2)return E("div",{id:"pageviews-chart",style:{textAlign:"center"},children:["Insufficient data to show chart..",E("br",{}),"Try to change timeframe or resolution."]});const i=Math.max(...e.chartData.map((e=>e[1])));return E("div",{id:"pageviews-chart",children:E("table",{className:"charts-css column show-labels show-primary-axis",children:[E("thead",{children:E("tr",{children:[E("th",{scope:"col",children:"Date"}),E("th",{scope:"col",children:"Pageviews"})]})}),E("tbody",{children:e.chartData.map(((o,a)=>E("tr",{onClick:()=>n(+new Date(o[0])),children:E("td",{style:{"--start":0===a?0:e.chartData[a-1][1]/i,"--size":o[1]/i},children:[e.chartData.length<50&&E("span",{className:"data",children:o[1]}),E("span",{className:"tooltip",children:[r(o[0],t.resolution),E("br",{}),`${o[1]} pageviews`]})]})},o[0])))})]})});function r(e,t){return"daily"===t||"monthly"===t?new Date(e).toLocaleDateString():new Date(e).toLocaleString()}}function Se({data:e,filters:t={},toggleFilter:n}){if(!e)return null;if(!Number.isFinite(e.visitorsCount))return null;if(!Number.isFinite(e.pageviewsCount))return null;let i=e.live||{};return Object.keys(t).length>2&&(i=Object.keys(i).reduce(((e,n)=>Object.keys(t).filter((e=>["p","r","v"].includes(e))).every((e=>i[n].pageview[e]===t[e]))?Object.assign(e,{[n]:i[n]}):e),{})),E("div",{className:"stats",children:[E("div",{className:"grid contain text-lg",children:[E("div",{className:"w-50",children:[E("h2",{children:"Visitors"}),E("div",{id:"visitors-count",children:e.visitorsCount})]}),E("div",{className:"w-50",children:[E("h2",{children:"Pageviews"}),E("div",{id:"pageviews-count",children:e.pageviewsCount})]}),E("div",{className:"w-50",children:[E("h2",{children:"Bounce rate"}),E("div",{id:"bounce-rate",children:(e.visitorsCount/e.pageviewsCount*100).toFixed(0)+"%"})]}),E("div",{className:"w-50",children:[E("h2",{children:"Live"}),E("div",{id:"live",children:Object.keys(i).length})]})]}),E("div",{className:"contain",id:"live-pages",children:Object.keys(i).length>0&&E("div",{children:[E("h2",{children:["Live pages ",E("span",{className:"live-dot"})]}),E("ul",{children:Object.keys(i).reduce(((e,t)=>{const n=e.find((({p:e})=>e===i[t].pageview.p));return n?(n.c++,e):e.concat([{p:i[t].pageview.p,c:1}])}),[]).sort(((e,t)=>e.c-t.c)).map((({p:e,c:i})=>E("li",{className:`filterable ${t.p===e&&"active"}`,onClick:()=>n("p",e),children:`${i} · ${e}`},e)))})]})}),E("div",{className:"contain",id:"live-referrers",children:Object.keys(i).length>0&&E("div",{children:[E("h2",{children:["Live referrers ",E("span",{className:"live-dot"})]}),E("ul",{children:Object.keys(i).reduce(((e,t)=>{const n=e.find((({r:e})=>e===i[t].pageview.r));return n?(n.c++,e):e.concat([{r:i[t].pageview.r,c:1}])}),[]).sort(((e,t)=>e.c-t.c)).map((({r:e,c:i})=>E("li",{className:`filterable ${t.r===e&&"active"}`,onClick:()=>n("r",e),children:`${i} · ${(e||"").replace("https://","").replace("http://","")||"none"}`},e)))})]})})]})}function je(e){if(!e)return"/";const t=document.createElement("a");return t.href=e,t.hostname}function Oe({data:e,loading:t,filters:n={},toggleFilter:i}){if(!e)return null;const{referrers:r=[]}=e,{pages:o=[]}=e,{events:a=[]}=e,l=Math.max(...a.map((e=>e.views))),s=Math.max(...r.map((e=>e.views))),c=Math.max(...o.map((e=>e.views)));return E("div",{children:E("div",{className:`${t&&"loading"}`,children:[E("div",{className:"grid-lg contain",children:[E("div",{className:"w-50-lg",id:"referrers",children:[E("h2",{children:"Top Referrers"}),E("ul",{id:"top-referrers",children:r.map((e=>{const t=`https://icons.duckduckgo.com/ip3/${je(e.r)}.ico`;return E("li",{className:`filterable ${n.r===e.r&&"active"}`,style:{"--data-percentage":100-80*e.views/s+"%"},onClick:()=>i("r",e.r),children:E("div",{children:[E("b",{className:"views",children:e.views}),E("img",{loading:"lazy",className:"favicon",src:t}),e.r.replace("https://","").replace("http://","")||"none"]})},e.r)}))})]}),E("div",{className:"w-50-lg",id:"pages",children:[E("h2",{children:"Top Pages"}),E("ul",{id:"top-pages",children:o.map((e=>E("li",{onClick:()=>i("p",e.p),className:`filterable ${n.p===e.p&&"active"}`,style:{"--data-percentage":100-80*e.views/c+"%"},children:[E("b",{className:"views",children:e.views}),e.p]},e.p)))})]})]}),E("div",{className:"contain",children:[E("h2",{children:"Top Events"}),E("ul",{id:"top-events",children:a.map((e=>E("li",{className:`filterable ${n.e===e.e&&"active"}`,style:{"--data-percentage":100-80*e.views/l+"%"},onClick:()=>i("e",e.e),children:E("div",{children:[E("b",{className:"views",children:e.views}),e.e]})},e.e)))})]})]})})}function $e({data:e,filters:t={},toggleFilter:n}){return e&&Array.isArray(e.data)?E("div",{className:"contain",children:E("ul",{children:e.data.map(((e,i)=>{return"event"!==e.t&&E("li",{className:"pageview",children:[E("div",{className:`filterable ${t.v===e.v&&"active"}`,onClick:()=>n("v",e.v),children:[E("time",{children:e.d.substring(0,19)}),e.v," ",E("span",{style:{"background-color":(r=e.v,"#"+function(e){const t=(16777215&e).toString(16).toUpperCase();return"00000".substring(0,6-t.length)+t}(function(e){let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t}(r)))},className:"visitor dot"})]}),E("div",{className:`filterable ${t.p===e.p&&"active"}`,onClick:()=>n("p",e.p),children:E("b",{children:e.p})}),e.r&&E("div",{className:`filterable ${t.r===e.r&&"active"}`,onClick:()=>n("r",e.r),children:["from",E("img",{className:"favicon",src:`https://icons.duckduckgo.com/ip3/${je(e.r)}.ico`}),e.r.replace("https://","").replace("http://","")]})]},e.d);var r}))})}):null}class xe extends f{render({data:e,filters:t,loading:n,theme:i,searchTerm:r,updateResolution:o,updateTimeframe:a,updateCustomTimeframe:l,clearCustomTimeframe:s,toggleFilter:c,toggleTheme:u,updateSearchTerm:_}={}){return 0===Object.keys(e).length?null:E("div",{className:`${n&&"loading"}`,children:[E(Ce,{theme:i,toggleTheme:u}),E(Ne,{searchTerm:r,updateSearchTerm:_}),E(we,{filters:t,clearCustomTimeframe:s,updateResolution:o,updateTimeframe:a,updateCustomTimeframe:l}),E(Te,{data:e,filters:t,updateCustomTimeframe:l}),E(Se,{data:e,filters:t,toggleFilter:c}),E(Oe,{data:e,filters:t,toggleFilter:c}),E($e,{data:e,filters:t,toggleFilter:c})]})}}const De={data:{},mounted:!1,loading:!1,filters:{timeframe:"today",resolution:"hourly"},theme:"light"};const Ue=function(e){var t=F.get(this);return t||(t=new Map,F.set(this,t)),(t=R(this,t.get(e)||(t.set(e,t=function(e){for(var t,n,i=1,r="",o="",a=[0],l=function(e){1===i&&(e||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(0,e,r):3===i&&(e||r)?(a.push(3,e,r),i=2):2===i&&"..."===r&&e?a.push(4,e,0):2===i&&r&&!e?a.push(5,0,!0,r):i>=5&&((r||!e&&5===i)&&(a.push(i,0,r,n),i=6),e&&(a.push(i,e,0,n),i=6)),r=""},s=0;s<e.length;s++){s&&(1===i&&l(),l(s));for(var c=0;c<e[s].length;c++)t=e[s][c],1===i?"<"===t?(l(),a=[a],i=3):r+=t:4===i?"--"===r&&">"===t?(i=1,r=""):r=t+r[0]:o?t===o?o="":r+=t:'"'===t||"'"===t?o=t:">"===t?(l(),i=1):i&&("="===t?(i=5,n=r,r=""):"/"===t&&(i<5||">"===e[s][c+1])?(l(),3===i&&(a=a[0]),i=a,(a=a[0]).push(2,0,i),i=0):" "===t||"\t"===t||"\n"===t||"\r"===t?(l(),i=2):r+=t),3===i&&"!--"===r&&(i=4,a=a[0])}return l(),a}(e)),t),arguments,[])).length>1?t:t[0]}.bind(_);U(Ue`<${class extends f{state=De;componentDidMount(){if(window.location.search){const e=window.location.search.substring(1).split("&").map((e=>e.split("="))).reduce(((e,t)=>Object.assign(e,{[t[0]]:decodeURIComponent(t[1])})),{});this.setState({mounted:!0,filters:Object.assign({},this.state.filters,e)},(()=>this.getData()))}else this.setState({mounted:!0},(()=>this.getData()));setInterval((()=>this.getData()),6e4);new window.EventSource("/").onmessage=e=>{if(!e||!e.data)return console.error("skipping empty message");try{const t=JSON.parse(e.data,{});this.setState({data:Object.assign({},this.state.data,{live:t})})}catch(e){console.error("sse parse error",e)}}}async handleRoute(e){if(this.state.mounted)if(window.location.search){const e=window.location.search.substring(1).split("&").map((e=>e.split("="))).reduce(((e,t)=>Object.assign(e,{[t[0]]:decodeURIComponent(t[1])})),{});this.setState({filters:Object.assign({},this.state.filters,e)},(()=>this.getData()))}else this.getData()}async getData(){if(this.state.loading)return;if(this.setState({loading:!0}),this.state.filters.s&&""!==this.state.filters.s){console.log("filtering by search term");let e="";const t=Object.assign({},this.state.filters);delete t.p,delete t.r,delete t.v,Object.keys(t).length>0&&(e="?"+Object.keys(t).reduce(((e,n)=>e.concat([`${n}=${encodeURIComponent(t[n])}`])),[]).join("&"));const n=/(localhost|127\.0\.0\.1|0\.0\.0\.0)/.test(window.location.origin)?"http://127.0.0.1:8080":window.location.origin,i=await window.fetch(n+"/api/"+e),r=await i.json();return void this.setState({data:r,loading:!1})}let e="";Object.keys(this.state.filters).length>0&&(e="?"+Object.keys(this.state.filters).reduce(((e,t)=>e.concat([`${t}=${encodeURIComponent(this.state.filters[t])}`])),[]).join("&"));const t=/(localhost|127\.0\.0\.1|0\.0\.0\.0)/.test(window.location.origin)?"http://127.0.0.1:8080":window.location.origin,n=await window.fetch(t+"/api/"+e),i=await n.json();this.setState({data:i,loading:!1})}clearCustomTimeframe(){const e=Object.assign({},this.state.filters,{timeframe:"past-day"});delete e.from,delete e.to,this.setState({filters:e},(()=>pe("?"+Object.keys(e).reduce(((t,n)=>t.concat([`${n}=${encodeURIComponent(e[n])}`])),[]).join("&"))))}updateCustomTimeframe(e,t=Date.now()){if(!Number.isFinite(+new Date(e)))return;if(!Number.isFinite(+new Date(t)))return;const n=Object.assign({},this.state.filters,{from:e,to:t});delete n.timeframe,this.setState({filters:n},(()=>pe("?"+Object.keys(n).reduce(((e,t)=>e.concat([`${t}=${encodeURIComponent(n[t])}`])),[]).join("&"))))}updateTimeframe(e){const t=Object.assign({},this.state.filters,{timeframe:e});["today","past-day"].includes(e)&&["monthly","daily"].includes(t.resolution)&&(t.resolution="hourly"),["past-week"].includes(e)&&["monthly"].includes(t.resolution)&&(t.resolution="daily"),["past-month"].includes(e)&&["minutes","monthly"].includes(t.resolution)&&(t.resolution="daily"),["past-6-months"].includes(e)&&["minutes"].includes(t.resolution)&&(t.resolution="daily"),["past-year"].includes(e)&&["minutes","hourly"].includes(t.resolution)&&(t.resolution="monthly"),this.setState({filters:t},(()=>pe("?"+Object.keys(t).reduce(((e,n)=>e.concat([`${n}=${encodeURIComponent(t[n])}`])),[]).join("&"))))}updateResolution(e){const t=Object.assign({},this.state.filters,{resolution:e});this.setState({filters:t},(()=>pe("?"+Object.keys(t).reduce(((e,n)=>e.concat([`${n}=${encodeURIComponent(t[n])}`])),[]).join("&"))))}toggleFilter(e,t){const n=Object.assign({},this.state.filters);n[e]===t?delete n[e]:n[e]=t,this.setState({filters:n},(()=>pe("?"+Object.keys(n).reduce(((e,t)=>e.concat([`${t}=${encodeURIComponent(n[t])}`])),[]).join("&"))))}toggleTheme(){this.setState({theme:"dark"===this.state.theme?"light":"dark"})}updateSearchTerm(e=""){const t=Object.assign({},this.state.filters,{s:e});this.setState({filters:t},(()=>pe("?"+Object.keys(this.state.filters).reduce(((e,t)=>e.concat([`${t}=${encodeURIComponent(this.state.filters[t])}`])),[]).join("&"))))}render(){return E("div",{id:"app",className:`theme-${this.state.theme}`,children:E(ke,{onChange:this.handleRoute.bind(this),children:E(xe,{data:this.state.data,filters:this.state.filters,loading:this.state.loading,theme:this.state.theme,updateResolution:this.updateResolution.bind(this),updateTimeframe:this.updateTimeframe.bind(this),updateCustomTimeframe:this.updateCustomTimeframe.bind(this),clearCustomTimeframe:this.clearCustomTimeframe.bind(this),toggleFilter:this.toggleFilter.bind(this),toggleTheme:this.toggleTheme.bind(this),updateSearchTerm:this.updateSearchTerm.bind(this),path:"/"})})})}}}/>`,document.body);
//# sourceMappingURL=index.f38e4744.js.map
